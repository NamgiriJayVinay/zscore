 I want to get all packages which starts with com.example.sensors_app-
in my drop down and i will be slecvting only one package..... then that package will be set to my String pkg 

this is my main acitivity .java methos which has String pkg

 private void startSensor(String sensorType, int duration, boolean isBackground) {

        String pkg="com.example.sensors_app";

        Intent intent = new Intent();
        intent.setAction(pkg+".START_" + sensorType);
        intent.setPackage(pkg);
        intent.putExtra("DURATION", duration);
        intent.putExtra("isBackground", isBackground);
        sendBroadcast(intent);
        Log.d("SENT","broadcast sent with "+sensorType);
        Log.d("SENT","intent sent with "+intent);

    }




This is my dropdown in main ctivity .xml <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/dropDown"
        style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginStart="32dp"
        android:layout_marginTop="8dp"
        android:layout_marginEnd="32dp"
        android:hint="Select App"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/textView8"
        app:startIconDrawable="@drawable/android">

        <AutoCompleteTextView
            android:id="@+id/autoCompleteTextView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:textAlignment="center"
            android:inputType="none"
            android:padding="0dp"
            tools:text="Happy" />
    </com.google.android.material.textfield.TextInputLayout>






import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.util.Log;
import androidx.appcompat.app.AppCompatActivity;
import com.google.android.material.textfield.TextInputLayout;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    private String pkg;
    private AutoCompleteTextView autoCompleteTextView;
    private TextInputLayout dropDown;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        dropDown = findViewById(R.id.dropDown);
        autoCompleteTextView = findViewById(R.id.autoCompleteTextView);

        // Get all installed packages
        List<String> sensorApps = getInstalledSensorApps();

        // Populate dropdown with the package names
        ArrayAdapter<String> adapter = new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line, sensorApps);
        autoCompleteTextView.setAdapter(adapter);

        // Set the selected package to `pkg`
        autoCompleteTextView.setOnItemClickListener((parent, view, position, id) -> {
            pkg = adapter.getItem(position);
            Log.d("SELECTED_PACKAGE", "Selected package: " + pkg);
        });
    }

    private List<String> getInstalledSensorApps() {
        List<String> sensorApps = new ArrayList<>();
        PackageManager pm = getPackageManager();
        List<PackageInfo> packages = pm.getInstalledPackages(0);

        // Filter the packages starting with com.example.sensors_app-
        for (PackageInfo packageInfo : packages) {
            if (packageInfo.packageName.startsWith("com.example.sensors_app-")) {
                sensorApps.add(packageInfo.packageName);
            }
        }
        return sensorApps;
    }

    private void startSensor(String sensorType, int duration, boolean isBackground) {
        // Ensure that a package is selected
        if (pkg == null || pkg.isEmpty()) {
            Log.e("ERROR", "No package selected");
            return;
        }

        Intent intent = new Intent();
        intent.setAction(pkg + ".START_" + sensorType);
        intent.setPackage(pkg);
        intent.putExtra("DURATION", duration);
        intent.putExtra("isBackground", isBackground);
        sendBroadcast(intent);

        Log.d("SENT", "Broadcast sent with " + sensorType);
        Log.d("SENT", "Intent sent with " + intent);
    }
}


55555



<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="8dp">

    <ImageView
        android:id="@+id/appIcon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_marginEnd="16dp"
        android:contentDescription="App Icon" />

    <TextView
        android:id="@+id/appName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:textColor="@android:color/black" />

</LinearLayout>




import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.widget.AutoCompleteTextView;

import androidx.appcompat.app.AppCompatActivity;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    private AutoCompleteTextView autoCompleteTextView;
    private AppDropdownAdapter appDropdownAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        autoCompleteTextView = findViewById(R.id.autoCompleteTextView);

        // Retrieve installed apps with package names starting with "com.example.sensors_app-"
        List<ApplicationInfo> sensorApps = getInstalledSensorApps();

        // Create the custom adapter
        appDropdownAdapter = new AppDropdownAdapter(this, sensorApps);

        // Set the adapter to the AutoCompleteTextView
        autoCompleteTextView.setAdapter(appDropdownAdapter);
    }

    private List<ApplicationInfo> getInstalledSensorApps() {
        List<ApplicationInfo> sensorApps = new ArrayList<>();
        PackageManager pm = getPackageManager();
        List<ApplicationInfo> installedApps = pm.getInstalledApplications(0);

        for (ApplicationInfo appInfo : installedApps) {
            if (appInfo.packageName.startsWith("com.example.sensors_app-")) {
                sensorApps.add(appInfo);
            }
        }
        return sensorApps;
    }
}



